<!-- 图的基本概念 -->
<div class="tutorial-content" id="graph-basics">
    <div class="mb-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">图的基本概念</h1>
        <p class="text-lg text-gray-600">掌握图论的核心概念和数学基础</p>
    </div>

    <!-- 学习目标 -->
    <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-2">📚 学习目标</h3>
        <ul class="text-blue-800 space-y-1">
            <li>• 掌握图的数学表示方法</li>
            <li>• 理解度、路径、连通性等概念</li>
            <li>• 学会计算图的基本指标</li>
            <li>• 为后续学习GNN打下基础</li>
        </ul>
    </div>

    <!-- 图的数学表示 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">📐 图的数学表示</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- 邻接矩阵 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">📊 邻接矩阵 (Adjacency Matrix)</h3>
                <p class="text-gray-600 text-sm mb-4">
                    用二维矩阵表示图中节点之间的连接关系
                </p>
                
                <div class="bg-gray-50 p-4 rounded mb-4">
                    <h4 class="font-medium text-gray-900 mb-2">定义</h4>
                    <p class="text-sm text-gray-700 mb-2">
                        对于图 G = (V, E)，邻接矩阵 A 是一个 |V| × |V| 的矩阵：
                    </p>
                    <div class="font-mono text-sm bg-white p-2 rounded border">
                        A[i][j] = {1 if (i,j) ∈ E, 0 otherwise}
                    </div>
                </div>
                
                <!-- 示例矩阵 -->
                <div class="bg-blue-50 p-4 rounded">
                    <h4 class="font-medium text-blue-900 mb-2">示例</h4>
                    <div class="overflow-x-auto">
                        <table class="min-w-full text-sm">
                            <thead>
                                <tr class="bg-blue-100">
                                    <th class="p-2 text-center">节点</th>
                                    <th class="p-2 text-center">A</th>
                                    <th class="p-2 text-center">B</th>
                                    <th class="p-2 text-center">C</th>
                                    <th class="p-2 text-center">D</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td class="p-2 text-center font-semibold">A</td><td class="p-2 text-center">0</td><td class="p-2 text-center">1</td><td class="p-2 text-center">1</td><td class="p-2 text-center">0</td></tr>
                                <tr><td class="p-2 text-center font-semibold">B</td><td class="p-2 text-center">1</td><td class="p-2 text-center">0</td><td class="p-2 text-center">0</td><td class="p-2 text-center">1</td></tr>
                                <tr><td class="p-2 text-center font-semibold">C</td><td class="p-2 text-center">1</td><td class="p-2 text-center">0</td><td class="p-2 text-center">0</td><td class="p-2 text-center">1</td></tr>
                                <tr><td class="p-2 text-center font-semibold">D</td><td class="p-2 text-center">0</td><td class="p-2 text-center">1</td><td class="p-2 text-center">1</td><td class="p-2 text-center">0</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- 邻接表 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">📝 邻接表 (Adjacency List)</h3>
                <p class="text-gray-600 text-sm mb-4">
                    为每个节点维护一个邻居节点的列表
                </p>
                
                <div class="bg-gray-50 p-4 rounded mb-4">
                    <h4 class="font-medium text-gray-900 mb-2">优势</h4>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>• 空间复杂度：O(V + E)</li>
                        <li>• 适合稀疏图</li>
                        <li>• 查找邻居效率高</li>
                    </ul>
                </div>
                
                <!-- 示例邻接表 -->
                <div class="bg-green-50 p-4 rounded">
                    <h4 class="font-medium text-green-900 mb-2">示例</h4>
                    <div class="font-mono text-sm space-y-1">
                        <div>A: [B, C]</div>
                        <div>B: [A, D]</div>
                        <div>C: [A, D]</div>
                        <div>D: [B, C]</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 对比表 -->
        <div class="bg-white border rounded-lg p-6">
            <h3 class="font-semibold text-gray-900 mb-3">⚖️ 邻接矩阵 vs 邻接表</h3>
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-2 text-left">特性</th>
                            <th class="px-4 py-2 text-left">邻接矩阵</th>
                            <th class="px-4 py-2 text-left">邻接表</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="px-4 py-2 font-medium">空间复杂度</td>
                            <td class="px-4 py-2">O(V²)</td>
                            <td class="px-4 py-2">O(V + E)</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-medium">查找边</td>
                            <td class="px-4 py-2">O(1)</td>
                            <td class="px-4 py-2">O(degree)</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-medium">遍历邻居</td>
                            <td class="px-4 py-2">O(V)</td>
                            <td class="px-4 py-2">O(degree)</td>
                        </tr>
                        <tr>
                            <td class="px-4 py-2 font-medium">适用场景</td>
                            <td class="px-4 py-2">密集图，快速查询</td>
                            <td class="px-4 py-2">稀疏图，节省空间</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- 核心概念 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">🔑 核心概念详解</h2>
        
        <div class="space-y-6">
            <!-- 度的概念 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🔢 度 (Degree)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-blue-50 p-4 rounded">
                        <h4 class="font-medium text-blue-900 mb-2">无向图</h4>
                        <p class="text-sm text-blue-800 mb-2">节点的度 = 连接到该节点的边数</p>
                        <div class="font-mono text-xs">degree(v) = |{u : (u,v) ∈ E}|</div>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded">
                        <h4 class="font-medium text-purple-900 mb-2">有向图</h4>
                        <p class="text-sm text-purple-800 mb-1">入度：指向该节点的边数</p>
                        <p class="text-sm text-purple-800 mb-2">出度：从该节点出发的边数</p>
                        <div class="font-mono text-xs">in-degree + out-degree</div>
                    </div>
                </div>
                
                <!-- 度的性质 -->
                <div class="bg-yellow-50 border border-yellow-200 p-4 rounded">
                    <h4 class="font-medium text-yellow-900 mb-2">🎯 握手定理</h4>
                    <p class="text-sm text-yellow-800 mb-2">
                        所有节点的度数之和 = 2 × 边数
                    </p>
                    <div class="font-mono text-sm">∑degree(v) = 2|E|</div>
                    <p class="text-xs text-yellow-700 mt-2">原因：每条边被两个端点各计算一次</p>
                </div>
            </div>
            
            <!-- 路径和距离 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🛤️ 路径和距离</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <div class="bg-green-50 p-4 rounded">
                        <h4 class="font-medium text-green-900 mb-2">路径 (Path)</h4>
                        <p class="text-sm text-green-800">连接两个节点的边序列</p>
                        <div class="text-xs text-green-600 mt-1">v₁ → v₂ → ... → vₖ</div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded">
                        <h4 class="font-medium text-blue-900 mb-2">最短路径</h4>
                        <p class="text-sm text-blue-800">两节点间边数最少的路径</p>
                        <div class="text-xs text-blue-600 mt-1">d(u,v) = min path length</div>
                    </div>
                    
                    <div class="bg-purple-50 p-4 rounded">
                        <h4 class="font-medium text-purple-900 mb-2">直径 (Diameter)</h4>
                        <p class="text-sm text-purple-800">图中最长的最短路径</p>
                        <div class="text-xs text-purple-600 mt-1">max d(u,v) for all u,v</div>
                    </div>
                </div>
                
                <!-- 路径示例 -->
                <div class="bg-gray-50 p-4 rounded">
                    <h4 class="font-medium text-gray-900 mb-2">示例</h4>
                    <div class="text-sm text-gray-700">
                        <p>在图 A-B-C-D 中：</p>
                        <ul class="mt-2 space-y-1 ml-4">
                            <li>• A到C的路径：A → B → C 或 A → C (如果存在直接连接)</li>
                            <li>• 最短路径长度：1 (直接连接) 或 2 (经过B)</li>
                            <li>• 如果图的直径是3，意味着最远的两个节点需要3步才能到达</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 连通性 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🔗 连通性 (Connectivity)</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-red-50 p-4 rounded">
                        <h4 class="font-medium text-red-900 mb-2">连通图</h4>
                        <p class="text-sm text-red-800 mb-2">任意两个节点都存在路径相连</p>
                        <div class="text-xs text-red-600">∀u,v ∈ V, ∃ path(u,v)</div>
                    </div>
                    
                    <div class="bg-orange-50 p-4 rounded">
                        <h4 class="font-medium text-orange-900 mb-2">连通分量</h4>
                        <p class="text-sm text-orange-800 mb-2">最大的连通子图</p>
                        <div class="text-xs text-orange-600">内部连通，与外部断开</div>
                    </div>
                </div>
                
                <!-- 连通性判断 -->
                <div class="bg-indigo-50 p-4 rounded">
                    <h4 class="font-medium text-indigo-900 mb-2">如何判断连通性？</h4>
                    <ol class="text-sm text-indigo-800 space-y-1 list-decimal list-inside">
                        <li>从任意节点开始进行深度优先搜索(DFS)或广度优先搜索(BFS)</li>
                        <li>如果能访问到所有节点，则图是连通的</li>
                        <li>否则，重复过程找到所有连通分量</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <!-- 特殊类型的图 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">🌟 特殊类型的图</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 完全图 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🔲 完全图 (Complete Graph)</h3>
                <p class="text-gray-600 text-sm mb-3">任意两个不同节点都直接相连</p>
                
                <div class="bg-blue-50 p-3 rounded mb-3">
                    <p class="text-sm text-blue-800">
                        <strong>性质：</strong>n个节点的完全图有 n(n-1)/2 条边
                    </p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>社交网络中的紧密群体、完全匹配问题</p>
                </div>
            </div>
            
            <!-- 二部图 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">👥 二部图 (Bipartite Graph)</h3>
                <p class="text-gray-600 text-sm mb-3">节点可分为两个集合，只有不同集合间有边</p>
                
                <div class="bg-green-50 p-3 rounded mb-3">
                    <p class="text-sm text-green-800">
                        <strong>特点：</strong>没有奇数长度的环
                    </p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>推荐系统（用户-物品图）、匹配问题</p>
                </div>
            </div>
            
            <!-- 树 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🌳 树 (Tree)</h3>
                <p class="text-gray-600 text-sm mb-3">连通的无环图</p>
                
                <div class="bg-purple-50 p-3 rounded mb-3">
                    <p class="text-sm text-purple-800">
                        <strong>性质：</strong>n个节点的树有 n-1 条边
                    </p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>家族谱系、公司组织架构、决策树</p>
                </div>
            </div>
            
            <!-- 有向无环图 -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">➡️ 有向无环图 (DAG)</h3>
                <p class="text-gray-600 text-sm mb-3">有方向且无环的图</p>
                
                <div class="bg-yellow-50 p-3 rounded mb-3">
                    <p class="text-sm text-yellow-800">
                        <strong>特点：</strong>可以进行拓扑排序
                    </p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>任务调度、课程先修关系、区块链</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 图的遍历算法 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">🔍 图的遍历算法</h2>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- DFS -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🏔️ 深度优先搜索 (DFS)</h3>
                
                <div class="bg-blue-50 p-4 rounded mb-4">
                    <h4 class="font-medium text-blue-900 mb-2">算法思路</h4>
                    <ol class="text-sm text-blue-800 space-y-1 list-decimal list-inside">
                        <li>从起始节点开始</li>
                        <li>尽可能深入每个分支</li>
                        <li>直到无法继续，再回溯</li>
                        <li>重复直到所有节点被访问</li>
                    </ol>
                </div>
                
                <div class="bg-gray-50 p-3 rounded mb-3">
                    <h4 class="font-medium text-gray-900 mb-2">时间复杂度</h4>
                    <p class="text-sm text-gray-700">O(V + E)</p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>检测环、拓扑排序、路径查找</p>
                </div>
            </div>
            
            <!-- BFS -->
            <div class="bg-white border rounded-lg p-6">
                <h3 class="font-semibold text-gray-900 mb-3">🌊 广度优先搜索 (BFS)</h3>
                
                <div class="bg-green-50 p-4 rounded mb-4">
                    <h4 class="font-medium text-green-900 mb-2">算法思路</h4>
                    <ol class="text-sm text-green-800 space-y-1 list-decimal list-inside">
                        <li>从起始节点开始</li>
                        <li>先访问所有邻居节点</li>
                        <li>再访问邻居的邻居</li>
                        <li>按层次逐步扩展</li>
                    </ol>
                </div>
                
                <div class="bg-gray-50 p-3 rounded mb-3">
                    <h4 class="font-medium text-gray-900 mb-2">时间复杂度</h4>
                    <p class="text-sm text-gray-700">O(V + E)</p>
                </div>
                
                <div class="text-sm text-gray-600">
                    <p><strong>应用：</strong>最短路径、连通性检测、社交网络分析</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 实际应用 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">🚀 图论在算法中的应用</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border rounded-lg p-4">
                <h3 class="font-semibold text-gray-900 mb-2">🗺️ 最短路径算法</h3>
                <ul class="text-sm text-gray-600 space-y-1">
                    <li>• Dijkstra算法（非负权重）</li>
                    <li>• Bellman-Ford算法（可有负权重）</li>
                    <li>• Floyd-Warshall算法（所有对最短路径）</li>
                </ul>
            </div>
            
            <div class="bg-gradient-to-r from-green-50 to-emerald-50 border rounded-lg p-4">
                <h3 class="font-semibold text-gray-900 mb-2">🌐 网络流算法</h3>
                <ul class="text-sm text-gray-600 space-y-1">
                    <li>• 最大流问题</li>
                    <li>• 最小割问题</li>
                    <li>• 二分图匹配</li>
                </ul>
            </div>
            
            <div class="bg-gradient-to-r from-purple-50 to-pink-50 border rounded-lg p-4">
                <h3 class="font-semibold text-gray-900 mb-2">🌳 最小生成树</h3>
                <ul class="text-sm text-gray-600 space-y-1">
                    <li>• Prim算法</li>
                    <li>• Kruskal算法</li>
                    <li>• 网络设计优化</li>
                </ul>
            </div>
            
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 border rounded-lg p-4">
                <h3 class="font-semibold text-gray-900 mb-2">🎯 图着色问题</h3>
                <ul class="text-sm text-gray-600 space-y-1">
                    <li>• 地图着色</li>
                    <li>• 时间表安排</li>
                    <li>• 寄存器分配</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- 思考与练习 -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">🤔 思考与练习</h2>
        
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
            <h3 class="font-semibold text-yellow-900 mb-3">练习题</h3>
            <ol class="text-yellow-800 space-y-2 list-decimal list-inside">
                <li>给定一个4节点的图，计算其邻接矩阵和邻接表表示</li>
                <li>证明：在无向图中，度数为奇数的节点个数必须是偶数</li>
                <li>设计算法判断一个图是否为二部图</li>
                <li>比较DFS和BFS在不同应用场景下的优劣</li>
            </ol>
        </div>
        
        <div class="bg-green-50 border-l-4 border-green-400 p-4">
            <h3 class="font-semibold text-green-900 mb-3">💡 关键收获</h3>
            <ul class="text-green-800 space-y-1">
                <li>• 选择合适的图表示方法很重要</li>
                <li>• 度、路径、连通性是分析图的基础</li>
                <li>• DFS和BFS是图算法的基石</li>
                <li>• 图论为复杂问题提供了数学工具</li>
            </ul>
        </div>
    </section>

    <!-- 导航按钮 -->
    <div class="flex justify-between items-center pt-6 border-t border-gray-200">
        <div>
            <button data-action="show-tutorial" data-tutorial="social-network" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                ← 上一节：社交网络案例
            </button>
        </div>
        <div class="text-center">
            <span class="text-sm text-gray-500">第3节 共12节</span>
        </div>
        <div>
            <button data-action="show-tutorial" data-tutorial="graph-types" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                下一节：图的类型与表示 →
            </button>
        </div>
    </div>
</div>