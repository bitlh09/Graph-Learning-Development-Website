<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç­”é¢˜é—¯å…³</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
  <style>
    /* å…¨å±€ç¾åŒ–æ ·å¼ */
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }
    
    .progress-bar {
      height: 1.25rem;
      background: linear-gradient(90deg, #f3f4f6, #e5e7eb);
      border-radius: 9999px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    
    .progress-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.3), transparent);
      border-radius: 9999px 9999px 0 0;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
      width: 1%;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      border-radius: 9999px;
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
    }
    
    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(180deg, rgba(255,255,255,0.4), transparent);
      border-radius: 9999px 9999px 0 0;
    }
    .learning-path {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 2rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border-radius: 1.5rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .path-node {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0.75rem 0;
      position: relative;
      background: linear-gradient(135deg, #e5e7eb, #d1d5db);
      color: #6B7280;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border: 3px solid rgba(255, 255, 255, 0.3);
    }
    
    .path-node::before {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      border-radius: 50%;
      background: linear-gradient(135deg, transparent, rgba(255,255,255,0.3));
      z-index: -1;
    }
    
    .path-node.unlocked {
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }
    
    .path-node.completed {
      background: linear-gradient(135deg, #3B82F6, #2563EB);
      color: white;
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }
    
    .path-node.current {
      background: linear-gradient(135deg, #8B5CF6, #7C3AED);
      color: white;
      transform: scale(1.15);
      box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3), 0 8px 25px rgba(139, 92, 246, 0.5);
      animation: pulse-glow 2s infinite;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.3), 0 8px 25px rgba(139, 92, 246, 0.5); }
      50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0.5), 0 8px 30px rgba(139, 92, 246, 0.7); }
    }
    
    .path-node.locked {
      background: linear-gradient(135deg, #9CA3AF, #6B7280);
      cursor: not-allowed;
      opacity: 0.6;
    }
    
    .path-node:hover:not(.locked) {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    .path-connector {
      width: 6px;
      height: 40px;
      background: linear-gradient(to bottom, #e5e7eb, #d1d5db);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 3px;
      position: relative;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .path-connector::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 100%;
      background: linear-gradient(to bottom, rgba(255,255,255,0.6), transparent);
      border-radius: 1px;
    }
    
    .path-connector.active {
      background: linear-gradient(to bottom, #10B981, #059669);
      box-shadow: 0 0 15px rgba(16, 185, 129, 0.4);
    }
    
    .path-connector.excellent {
      background: linear-gradient(to bottom, #10B981, #34D399, #6EE7B7);
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
      animation: shimmer 3s infinite;
    }
    
    .path-connector.good {
      background: linear-gradient(to bottom, #F59E0B, #FBBF24, #FCD34D);
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
    }
    
    .path-connector.needs-improvement {
      background: linear-gradient(to bottom, #EF4444, #F87171, #FCA5A5);
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
    }
    
    @keyframes shimmer {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    .visual-explanation {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 1rem;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 197, 253, 0.1));
      border-left: 4px solid #3B82F6;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(59, 130, 246, 0.2);
      box-shadow: 0 8px 32px rgba(59, 130, 246, 0.1);
      transition: all 0.3s ease;
    }
    
    .visual-explanation:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(59, 130, 246, 0.15);
    }
    
    .recommendation-card {
      margin-top: 1rem;
      padding: 1.5rem;
      border-radius: 1rem;
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(59, 130, 246, 0.1));
      border-left: 4px solid #2563EB;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(37, 99, 235, 0.2);
      box-shadow: 0 8px 32px rgba(37, 99, 235, 0.1);
      transition: all 0.3s ease;
    }
    
    .recommendation-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(37, 99, 235, 0.15);
    }
    
    .fade-in {
      animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes fadeIn {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .slide-in {
      animation: slideIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    .category-label {
      font-size: 12px;
      color: #374151;
      padding: 6px 12px;
      border-radius: 20px;
      background: linear-gradient(135deg, #F3F4F6, #E5E7EB);
      margin: 0 4px;
      font-weight: 500;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.5);
      transition: all 0.3s ease;
    }
    
    .category-label:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .difficulty-indicator {
      position: absolute;
      bottom: -8px;
      right: -8px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .difficulty-indicator:hover {
      transform: scale(1.2);
    }
    
    /* æ·»åŠ è£…é¥°æ€§å›¾æ ‡ */
    .icon-decoration {
      display: inline-block;
      margin-right: 8px;
      font-size: 1.2em;
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
    }
    
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      border-radius: 50%;
      animation: sparkle 2s infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .sparkle:nth-child(1) { top: 10%; left: 20%; animation-delay: 0s; }
    .sparkle:nth-child(2) { top: 20%; right: 30%; animation-delay: 0.5s; }
    .sparkle:nth-child(3) { bottom: 30%; left: 40%; animation-delay: 1s; }
    .sparkle:nth-child(4) { bottom: 20%; right: 20%; animation-delay: 1.5s; }
    .knowledge-map {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(249, 250, 251, 0.8), rgba(243, 244, 246, 0.8));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 1.5rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
    }
    
    .knowledge-area {
      padding: 1.5rem;
      border-radius: 1rem;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.9));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .knowledge-area:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15);
    }
    
    .mastery-bar {
      height: 12px;
      background: linear-gradient(135deg, #E5E7EB, #D1D5DB);
      border-radius: 6px;
      margin: 0.75rem 0;
      overflow: hidden;
      position: relative;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .mastery-bar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 50%;
      background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
      border-radius: 6px 6px 0 0;
    }
    
    .mastery-fill {
      height: 100%;
      border-radius: 6px;
      transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .mastery-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer-mastery 2s infinite;
    }
    
    @keyframes shimmer-mastery {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    /* ç¾åŒ–æŒ‰é’®æ ·å¼ */
    .mode-btn {
      position: relative;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    .mode-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }
    
    .mode-btn:hover::before {
      left: 100%;
    }
    
    .mode-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .mode-btn:active {
      transform: translateY(0);
    }
    
    .linear-mode {
      background: linear-gradient(135deg, #3B82F6, #1D4ED8);
      color: white;
    }
    
    .adaptive-mode {
      background: linear-gradient(135deg, #8B5CF6, #7C3AED);
      color: white;
    }
    
    .submit-btn, .next-btn, .restart-btn {
      position: relative;
      padding: 12px 32px;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: none;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    .submit-btn {
      background: linear-gradient(135deg, #3B82F6, #1E40AF);
      color: white;
    }
    
    .submit-btn:hover {
      background: linear-gradient(135deg, #2563EB, #1D4ED8);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
    }
    
    .next-btn {
      background: linear-gradient(135deg, #10B981, #059669);
      color: white;
    }
    
    .next-btn:hover {
      background: linear-gradient(135deg, #059669, #047857);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
    }
    
    .restart-btn {
      background: linear-gradient(135deg, #3B82F6, #1E40AF);
      color: white;
    }
    
    .restart-btn:hover {
      background: linear-gradient(135deg, #2563EB, #1D4ED8);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
    }
    
    /* ç¾åŒ–ç­”é¢˜å¡ç‰‡ */
    #quiz-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,250,252,0.9));
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
    }
    
    #quiz-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
    }
    
    /* ç¾åŒ–é€‰é¡¹æ ·å¼ */
    .quiz-option {
      padding: 12px 16px;
      margin: 8px 0;
      border-radius: 12px;
      border: 2px solid #E5E7EB;
      background: linear-gradient(135deg, #FFFFFF, #F9FAFB);
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .quiz-option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
      transition: left 0.3s;
    }
    
    .quiz-option:hover::before {
      left: 100%;
    }
    
    .quiz-option:hover {
      border-color: #3B82F6;
      transform: translateX(5px);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
    }
    
    .quiz-option.selected {
      border-color: #3B82F6;
      background: linear-gradient(135deg, #EBF4FF, #DBEAFE);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }
    
    /* ç¾åŒ–åé¦ˆåŒºåŸŸ */
    #feedback {
      border-radius: 1.5rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
      transition: all 0.3s ease;
    }
    
    #feedback.correct {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(52, 211, 153, 0.1));
      border-color: rgba(16, 185, 129, 0.3);
    }
    
    #feedback.incorrect {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(248, 113, 113, 0.1));
      border-color: rgba(239, 68, 68, 0.3);
    }
  </style>
</head>
<body class="bg-gray-50">

    <!-- å¯¼èˆªæ  -->
    <nav class="gradient-bg shadow-lg sticky top-0 z-50">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <svg class="w-8 h-8 text-white mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-white text-xl font-bold">GraphLearn</span>
                    </div>
                    <div class="hidden md:block ml-10">
                        <div class="flex space-x-8">
                            <a href="index.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">é¦–é¡µ</a>
                            <a href="tutorials.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">æ•™ç¨‹</a>
                            <a href="playground.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">åœ¨çº¿å®è·µ</a>
                            <a href="community.html" class="nav-link text-blue-200 px-3 py-2 rounded-md text-sm font-medium">ç¤¾åŒº</a>
                            <a href="resources.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">èµ„æº</a>
                            <a href="game.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">ç­”é¢˜é—¯å…³</a>
                            <a href="team.html" class="nav-link text-white hover:text-blue-200 px-3 py-2 rounded-md text-sm font-medium">å›¢é˜Ÿ</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center">
                    <button onclick="toggleLogin()" class="bg-white text-blue-600 px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-50 transition-colors">
                        ç™»å½•/æ³¨å†Œ
                    </button>
                </div>
            </div>
        </div>
    </nav>

  <!-- é¡µé¢ä¸»ä½“ -->
  <main class="max-w-6xl mx-auto mt-8 p-6 bg-white rounded-2xl shadow-md glass-effect" style="position: relative;">
    <!-- è£…é¥°æ€§é—ªçƒå…ƒç´  -->
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
    
    <!-- æ ‡é¢˜ -->
    <h2 class="text-2xl font-bold mb-4 text-center">
      <span class="icon-decoration">ğŸ¯</span>
      ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„é—¯å…³
      <span class="icon-decoration">ğŸš€</span>
    </h2>

    <!-- æ¨¡å¼é€‰æ‹© -->
    <div class="flex justify-center mb-6 space-x-4">
      <button id="linear-mode-btn" class="mode-btn linear-mode">
        çº¿æ€§é—¯å…³æ¨¡å¼
      </button>
      <button id="adaptive-mode-btn" class="mode-btn adaptive-mode">
        ä¸ªæ€§åŒ–å­¦ä¹ æ¨¡å¼
      </button>
    </div>

    <!-- ç”¨æˆ·æ°´å¹³æŒ‡ç¤ºå™¨ -->
    <div id="user-level-indicator" class="mb-6 p-4 bg-gradient-to-r from-green-100 to-blue-100 rounded-lg hidden">
      <h3 class="font-semibold mb-2">
        <span class="icon-decoration">ğŸ“Š</span>
        æ‚¨çš„å½“å‰æ°´å¹³
      </h3>
      <div class="flex items-center">
        <span class="text-sm mr-2">æ°´å¹³ç­‰çº§:</span>
        <div class="flex space-x-1">
          <span id="user-level-stars" class="text-yellow-500"></span>
        </div>
        <span id="user-level-text" class="ml-2 text-sm font-medium"></span>
      </div>
      <div class="mt-2 text-sm text-gray-600" id="level-description"></div>
    </div>

    <!-- çŸ¥è¯†æŒæ¡æƒ…å†µ -->
    <div id="knowledge-progress" class="mb-6 p-4 bg-gray-50 rounded-lg hidden">
      <h3 class="font-semibold mb-3">
        <span class="icon-decoration">ğŸ“ˆ</span>
        çŸ¥è¯†æŒæ¡æƒ…å†µ
      </h3>
      <div class="knowledge-map">
        <!-- åŠ¨æ€ç”ŸæˆçŸ¥è¯†é¢†åŸŸ -->
      </div>
    </div>

    <!-- å…³å¡è¿›åº¦æ¡ -->
    <div class="mb-6">
      <p class="mb-2">å…³å¡è¿›åº¦ï¼šç¬¬ <span id="current-level">1</span> å…³ / å…± <span id="total-levels">100</span> å…³</p>
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
    </div>

    <!-- å­¦ä¹ è·¯å¾„åœ°å›¾ -->
    <div id="learning-path-container" class="hidden">
      <h3 class="text-lg font-semibold mb-4 text-center">
        <span class="icon-decoration">ğŸ—ºï¸</span>
        æ‚¨çš„ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
        <span class="icon-decoration">âœ¨</span>
      </h3>
      <div class="learning-path">
        <!-- åŠ¨æ€ç”Ÿæˆå­¦ä¹ è·¯å¾„ -->
      </div>
    </div>

    <!-- ç­”é¢˜å¡ -->
    <section id="quiz-card" class="mb-6">
      <div class="flex justify-between items-center mb-3">
        <h3 id="question-text" class="text-lg font-semibold">é¢˜ç›®åŠ è½½ä¸­...</h3>
        <div class="flex items-center">
          <span class="category-label" id="question-category"></span>
          <span class="difficulty-indicator ml-2" id="question-difficulty"></span>
        </div>
      </div>
      <form id="quiz-form" class="space-y-3"></form>
    </section>

    <!-- æäº¤æŒ‰é’® -->
    <div class="text-center">
      <button id="submit-btn" class="submit-btn">
        æäº¤ç­”æ¡ˆ
      </button>
    </div>

    <!-- ç­”æ¡ˆåé¦ˆ -->
    <div id="feedback" class="mt-4 p-4 rounded-lg hidden">
      <h4 class="font-semibold mb-2" id="feedback-title"></h4>
      <p id="feedback-content" class="mb-3"></p>
      
      <!-- å¯è§†åŒ–è§£é‡Š -->
      <div id="visual-explanation" class="visual-explanation hidden">
        <h5 class="font-semibold mb-2">ğŸ“Š å¯è§†åŒ–è§£é‡Š</h5>
        <div id="explanation-content"></div>
      </div>
      
      <!-- å­¦ä¹ èµ„æºæ¨è -->
      <div id="resource-recommendation" class="recommendation-card hidden">
        <h5 class="font-semibold mb-2">ğŸ“š æ¨èå­¦ä¹ èµ„æº</h5>
        <ul id="resource-list" class="list-disc pl-5"></ul>
      </div>
    </div>

    <!-- ä¸‹ä¸€å…³æŒ‰é’® -->
    <div class="text-center mt-4 hidden" id="next-level-container">
      <button id="next-level-btn" class="next-btn">
        è¿›å…¥ä¸‹ä¸€å…³
      </button>
    </div>

    <!-- é€šå…³åº†ç¥ -->
    <div id="completion-celebration" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
      <div class="bg-white p-8 rounded-2xl text-center max-w-md">
        <div class="text-6xl mb-4">ğŸ‰</div>
        <h3 class="text-2xl font-bold mb-4">æ­å–œé€šå…³ï¼</h3>
        <p class="mb-4">æ‚¨å·²æˆåŠŸå®Œæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ï¼</p>
        <p class="text-lg font-semibold mb-4">æœ€ç»ˆå¾—åˆ†: <span id="final-score">0</span></p>
        <button id="restart-btn" class="restart-btn">
          é‡æ–°å¼€å§‹
        </button>
      </div>
    </div>
  </main>

  <!-- JS è„šæœ¬ -->
  <script>
    // é¢˜åº“æ•°æ® - æ‰©å±•æ›´å¤šé¢˜ç›®
    const questions = [
      // åŸºç¡€æ¦‚å¿µç±»
      {id: 1, question:"ä»¥ä¸‹å“ªç§æ˜¯æœ€ç»å…¸çš„å›¾ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿ",options:["CNN","GCN","RNN","LSTM"],answer:1, category:"åŸºç¡€æ¦‚å¿µ", difficulty:1,
       explanation:"GCNï¼ˆå›¾å·ç§¯ç½‘ç»œï¼‰æ˜¯æœ€ç»å…¸çš„å›¾ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œä¸“é—¨ç”¨äºå¤„ç†å›¾ç»“æ„æ•°æ®ã€‚",
       resources:["æ•™ç¨‹ï¼šGCNåŸºæœ¬åŸç†","è§†é¢‘ï¼šå›¾å·ç§¯ç½‘ç»œè¯¦è§£"], prerequisites: []},
      
      {id: 2, question:"GCN æœ€å¸¸ç”¨äºå¤„ç†å“ªç±»æ•°æ®ï¼Ÿ",options:["å›¾ç»“æ„æ•°æ®","åºåˆ—æ•°æ®","å›¾åƒæ•°æ®","è¡¨æ ¼æ•°æ®"],answer:0, category:"åŸºç¡€æ¦‚å¿µ", difficulty:1,
       explanation:"GCNä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†å›¾ç»“æ„æ•°æ®ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ•æ‰èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚",
       resources:["æ–‡ç« ï¼šå›¾æ•°æ®ç»“æ„å…¥é—¨","æ•™ç¨‹ï¼šGCNåº”ç”¨åœºæ™¯"], prerequisites: [1]},
      
      {id: 3, question:"åœ¨å›¾ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ä»€ä¹ˆè¡¨ç¤ºå…³ç³»ï¼Ÿ",options:["è¾¹","æƒé‡","æ ‡ç­¾","çŸ©é˜µ"],answer:0, category:"åŸºç¡€æ¦‚å¿µ", difficulty:1,
       explanation:"å›¾ä¸­çš„èŠ‚ç‚¹é€šè¿‡è¾¹(edge)æ¥è¡¨ç¤ºå½¼æ­¤ä¹‹é—´çš„å…³ç³»ã€‚",
       resources:["æ•™ç¨‹ï¼šå›¾è®ºåŸºç¡€","è§†é¢‘ï¼šå›¾çš„è¡¨ç¤ºæ–¹æ³•"], prerequisites: [1]},
      
      // æ¨¡å‹æ¶æ„ç±»
      {id: 4, question:"Graph Attention Network (GAT) å¼•å…¥äº†ä»€ä¹ˆæœºåˆ¶ï¼Ÿ",options:["å·ç§¯","æ³¨æ„åŠ›æœºåˆ¶","å¾ªç¯","å¼ºåŒ–å­¦ä¹ "],answer:1, category:"æ¨¡å‹æ¶æ„", difficulty:2,
       explanation:"GATå¼•å…¥äº†æ³¨æ„åŠ›æœºåˆ¶ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿä¸ºä¸åŒçš„é‚»å±…èŠ‚ç‚¹åˆ†é…ä¸åŒçš„é‡è¦æ€§æƒé‡ã€‚",
       resources:["è®ºæ–‡ï¼šGraph Attention Networks","æ•™ç¨‹ï¼šæ³¨æ„åŠ›æœºåˆ¶åœ¨å›¾ç¥ç»ç½‘ç»œä¸­çš„åº”ç”¨"], prerequisites: [1,2]},
      
      {id: 5, question:"GraphSAGE æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Ÿ",options:["åŸºäºé‡‡æ ·çš„èŠ‚ç‚¹èšåˆ","å…¨å±€ç‰¹å¾ç¼–ç ","åºåˆ—ç”Ÿæˆ","è¾¹é¢„æµ‹"],answer:0, category:"æ¨¡å‹æ¶æ„", difficulty:2,
       explanation:"GraphSAGEé€šè¿‡é‡‡æ ·å’Œèšåˆé‚»å±…èŠ‚ç‚¹çš„ç‰¹å¾æ¥ç”ŸæˆèŠ‚ç‚¹åµŒå…¥ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡å›¾æ•°æ®ã€‚",
       resources:["è®ºæ–‡ï¼šInductive Representation Learning on Large Graphs","æ•™ç¨‹ï¼šGraphSAGEåŸç†ä¸åº”ç”¨"], prerequisites: [1,2]},
      
      // åº”ç”¨åœºæ™¯ç±»
      {id: 6, question:"GNN åœ¨æ¨èç³»ç»Ÿä¸­å¯ç”¨äºï¼Ÿ",options:["ç¤¾äº¤æ¨è","ååŒè¿‡æ»¤","å†…å®¹æ¨è","ä»¥ä¸Šéƒ½å¯ä»¥"],answer:3, category:"åº”ç”¨åœºæ™¯", difficulty:2,
       explanation:"å›¾ç¥ç»ç½‘ç»œåœ¨æ¨èç³»ç»Ÿä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼ŒåŒ…æ‹¬ç¤¾äº¤æ¨èã€ååŒè¿‡æ»¤å’Œå†…å®¹æ¨èç­‰åœºæ™¯ã€‚",
       resources:["æ¡ˆä¾‹ï¼šGNNåœ¨æ¨èç³»ç»Ÿä¸­çš„åº”ç”¨","æ•™ç¨‹ï¼šæ„å»ºå›¾ç¥ç»ç½‘ç»œæ¨èç³»ç»Ÿ"], prerequisites: [1,2]},
      
      // é«˜çº§ä¸»é¢˜ç±»
      {id: 7, question:"åŠ¨æ€å›¾ç¥ç»ç½‘ç»œä¸»è¦ç”¨äºå¤„ç†ä»€ä¹ˆç±»å‹çš„å›¾ï¼Ÿ",options:["é™æ€å›¾","éšæ—¶é—´å˜åŒ–çš„å›¾","å¤§è§„æ¨¡å›¾","å¼‚æ„å›¾"],answer:1, category:"é«˜çº§ä¸»é¢˜", difficulty:3,
       explanation:"åŠ¨æ€å›¾ç¥ç»ç½‘ç»œä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†éšæ—¶é—´å˜åŒ–çš„å›¾ç»“æ„ï¼Œå¦‚æ¼”åŒ–çš„ç¤¾äº¤ç½‘ç»œæˆ–äº¤æ˜“ç½‘ç»œã€‚",
       resources:["è®ºæ–‡ï¼šåŠ¨æ€GNNç»¼è¿°","æ•™ç¨‹ï¼šåŠ¨æ€å›¾è¡¨ç¤ºå­¦ä¹ "], prerequisites: [4,5]},
      
      {id: 8, question:"å¼‚æ„å›¾ç¥ç»ç½‘ç»œä¸ä¼ ç»ŸGNNçš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ",options:["å¤„ç†å¤šç§ç±»å‹èŠ‚ç‚¹å’Œè¾¹","è®¡ç®—æ•ˆç‡æ›´é«˜","åªèƒ½å¤„ç†å°è§„æ¨¡å›¾","ä¸éœ€è¦ç‰¹å¾æå–"],answer:0, category:"é«˜çº§ä¸»é¢˜", difficulty:3,
       explanation:"å¼‚æ„å›¾ç¥ç»ç½‘ç»œä¸“é—¨è®¾è®¡å¤„ç†åŒ…å«å¤šç§ç±»å‹èŠ‚ç‚¹å’Œè¾¹çš„å¼‚è´¨ä¿¡æ¯å›¾ã€‚",
       resources:["è®ºæ–‡ï¼šå¼‚è´¨å›¾ç¥ç»ç½‘ç»œ","æ•™ç¨‹ï¼šHetGNNè¯¦è§£"], prerequisites: [4,5]},
      
      // å®è·µæŠ€å·§ç±»
      {id: 9, question:"å›¾ç¥ç»ç½‘ç»œè®­ç»ƒä¸­è¿‡åº¦å¹³æ»‘é—®é¢˜æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ",options:["è®­ç»ƒé€Ÿåº¦è¿‡å¿«","æ‰€æœ‰èŠ‚ç‚¹è¡¨ç¤ºå˜å¾—ç›¸ä¼¼","æ¢¯åº¦çˆ†ç‚¸","æŸå¤±å‡½æ•°ä¸æ”¶æ•›"],answer:1, category:"å®è·µæŠ€å·§", difficulty:3,
       explanation:"è¿‡åº¦å¹³æ»‘é—®é¢˜æ˜¯æŒ‡å½“GNNå±‚æ•°è¿‡æ·±æ—¶ï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„è¡¨ç¤ºä¼šè¶‹äºç›¸ä¼¼ï¼Œä¸¢å¤±åŒºåˆ†åº¦ã€‚",
       resources:["æ•™ç¨‹ï¼šè§£å†³è¿‡åº¦å¹³æ»‘é—®é¢˜","è®ºæ–‡ï¼šGNNæ·±åº¦é™åˆ¶"], prerequisites: [4,5,6]},
      
      {id: 10, question:"ä»¥ä¸‹å“ªç§æŠ€æœ¯ä¸èƒ½è§£å†³GNNçš„è¿‡åº¦å¹³æ»‘é—®é¢˜ï¼Ÿ",options:["æ®‹å·®è¿æ¥","è·³è·ƒè¿æ¥","å¢åŠ æ›´å¤šå±‚æ•°","å›¾å½’ä¸€åŒ–"],answer:2, category:"å®è·µæŠ€å·§", difficulty:3,
       explanation:"å¢åŠ æ›´å¤šå±‚æ•°ä¼šåŠ å‰§è¿‡åº¦å¹³æ»‘é—®é¢˜ï¼Œè€Œä¸æ˜¯è§£å†³å®ƒã€‚",
       resources:["æ•™ç¨‹ï¼šGNNæœ€ä½³å®è·µ","è®ºæ–‡ï¼šGNNæ¶æ„ä¼˜åŒ–"], prerequisites: [9]}
    ];

    // çŸ¥è¯†å›¾è°±ç»“æ„
    const knowledgeGraph = {
      "åŸºç¡€æ¦‚å¿µ": { prerequisites: [], color: "#3B82F6", description: "å›¾ç¥ç»ç½‘ç»œçš„åŸºæœ¬æ¦‚å¿µå’Œæœ¯è¯­" },
      "æ¨¡å‹æ¶æ„": { prerequisites: ["åŸºç¡€æ¦‚å¿µ"], color: "#10B981", description: "å„ç§GNNæ¨¡å‹çš„ç»“æ„å’ŒåŸç†" },
      "åº”ç”¨åœºæ™¯": { prerequisites: ["åŸºç¡€æ¦‚å¿µ"], color: "#F59E0B", description: "GNNåœ¨ä¸åŒé¢†åŸŸçš„åº”ç”¨æ¡ˆä¾‹" },
      "é«˜çº§ä¸»é¢˜": { prerequisites: ["æ¨¡å‹æ¶æ„", "åº”ç”¨åœºæ™¯"], color: "#8B5CF6", description: "GNNçš„å‰æ²¿ç ”ç©¶å’Œé«˜çº§ä¸»é¢˜" },
      "å®è·µæŠ€å·§": { prerequisites: ["æ¨¡å‹æ¶æ„", "åº”ç”¨åœºæ™¯"], color: "#EC4899", description: "GNNè®­ç»ƒå’Œä¼˜åŒ–çš„å®ç”¨æŠ€å·§" }
    };

    // ç”¨æˆ·å­¦ä¹ çŠ¶æ€
    const userState = {
      currentLevel: 0,
      score: 0,
      masteryLevel: 0, // 0-æ–°æ‰‹, 1-åˆçº§, 2-ä¸­çº§, 3-é«˜çº§
      masteredCategories: {},
      weakCategories: {},
      answeredQuestions: new Set(),
      unlockedQuestions: new Set([1]), // åˆå§‹è§£é”ç¬¬ä¸€é¢˜
      adaptiveMode: true,
      learningPath: [],
      selectedAnswer: null,
      currentQuestionIndex: 0
    };

    // DOMå…ƒç´ 
    const questionText = document.getElementById("question-text");
    const quizForm = document.getElementById("quiz-form");
    const feedback = document.getElementById("feedback");
    const feedbackTitle = document.getElementById("feedback-title");
    const feedbackContent = document.getElementById("feedback-content");
    const progressFill = document.getElementById("progress-fill");
    const currentLevelSpan = document.getElementById("current-level");
    const totalLevelsSpan = document.getElementById("total-levels");
    const submitBtn = document.getElementById("submit-btn");
    const nextLevelBtn = document.getElementById("next-level-btn");
    const nextLevelContainer = document.getElementById("next-level-container");
    const visualExplanation = document.getElementById("visual-explanation");
    const explanationContent = document.getElementById("explanation-content");
    const resourceRecommendation = document.getElementById("resource-recommendation");
    const resourceList = document.getElementById("resource-list");
    const linearModeBtn = document.getElementById("linear-mode-btn");
    const adaptiveModeBtn = document.getElementById("adaptive-mode-btn");
    const learningPathContainer = document.getElementById("learning-path-container");
    const userLevelIndicator = document.getElementById("user-level-indicator");
    const knowledgeProgress = document.getElementById("knowledge-progress");
    const questionCategory = document.getElementById("question-category");
    const questionDifficulty = document.getElementById("question-difficulty");
    const completionCelebration = document.getElementById("completion-celebration");
    const finalScore = document.getElementById("final-score");
    const restartBtn = document.getElementById("restart-btn");
    const userLevelStars = document.getElementById("user-level-stars");
    const userLevelText = document.getElementById("user-level-text");
    const levelDescription = document.getElementById("level-description");

    // åˆå§‹åŒ–
    totalLevelsSpan.textContent = questions.length;
    
    // æ¨¡å¼é€‰æ‹©äº‹ä»¶
    linearModeBtn.addEventListener("click", () => {
      userState.adaptiveMode = false;
      linearModeBtn.classList.add("bg-blue-700");
      adaptiveModeBtn.classList.remove("bg-purple-700");
      adaptiveModeBtn.classList.add("bg-purple-600");
      learningPathContainer.classList.add("hidden");
      userLevelIndicator.classList.add("hidden");
      knowledgeProgress.classList.add("hidden");
      resetProgress();
    });
    
    adaptiveModeBtn.addEventListener("click", () => {
      userState.adaptiveMode = true;
      adaptiveModeBtn.classList.add("bg-purple-700");
      linearModeBtn.classList.remove("bg-blue-700");
      linearModeBtn.classList.add("bg-blue-600");
      learningPathContainer.classList.remove("hidden");
      userLevelIndicator.classList.remove("hidden");
      knowledgeProgress.classList.remove("hidden");
      generateLearningPath();
      updateUserLevelIndicator();
      updateKnowledgeProgress();
      resetProgress();
    });

    // ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
    function generateLearningPath() {
      // 1. ç¡®å®šç”¨æˆ·å½“å‰æ°´å¹³
      const userLevel = calculateUserLevel();
      userState.masteryLevel = userLevel;
      
      // 2. ç¡®å®šéœ€è¦åŠ å¼ºçš„çŸ¥è¯†é¢†åŸŸ
      const weakAreas = identifyWeakAreas();
      
      // 3. è·å–å¯ç”¨çš„é¢˜ç›®ï¼ˆå·²è§£é”ä¸”ç¬¦åˆå…ˆå†³æ¡ä»¶ï¼‰
      const availableQuestions = questions.filter(q => 
        userState.unlockedQuestions.has(q.id) && 
        q.prerequisites.every(preq => userState.answeredQuestions.has(preq))
      );
      
      // 4. æ„å»ºå­¦ä¹ è·¯å¾„
      userState.learningPath = [];
      
      // ä¼˜å…ˆå¤„ç†è–„å¼±é¢†åŸŸ
      weakAreas.forEach(area => {
        const areaQuestions = availableQuestions.filter(q => 
          q.category === area && !userState.answeredQuestions.has(q.id)
        );
        
        if (areaQuestions.length > 0) {
          // é€‰æ‹©é€‚å½“éš¾åº¦çš„é—®é¢˜
          const selectedQuestions = selectQuestionsForCategory(areaQuestions, userLevel);
          selectedQuestions.forEach(q => {
            userState.learningPath.push({
              id: userState.learningPath.length,
              questionId: q.id,
              category: q.category,
              difficulty: q.difficulty
            });
          });
        }
      });
      
      // æ·»åŠ å…¶ä»–å¯ç”¨é¢˜ç›®
      const otherQuestions = availableQuestions.filter(q => 
        !weakAreas.includes(q.category) && 
        !userState.answeredQuestions.has(q.id)
      );
      
      if (otherQuestions.length > 0) {
        const selectedQuestions = selectQuestionsForCategory(otherQuestions, userLevel);
        selectedQuestions.forEach(q => {
          userState.learningPath.push({
            id: userState.learningPath.length,
            questionId: q.id,
            category: q.category,
            difficulty: q.difficulty
          });
        });
      }
      
      // å¦‚æœè·¯å¾„ä¸ºç©ºï¼Œé‡æ–°è¯„ä¼°å¹¶ç”Ÿæˆ
      if (userState.learningPath.length === 0) {
        reevaluateUnlockedQuestions();
        generateLearningPath();
        return;
      }
      
      // æ›´æ–°UI
      updateLearningPathUI();
      updateUserLevelIndicator();
      updateKnowledgeProgress();
    }

    // è®¡ç®—ç”¨æˆ·å½“å‰æ°´å¹³
    function calculateUserLevel() {
      if (userState.answeredQuestions.size === 0) return 0;
      
      let correctCount = 0;
      let totalDifficulty = 0;
      
      userState.answeredQuestions.forEach(questionId => {
        const question = questions.find(q => q.id === questionId);
        if (question && userState.selectedAnswer === question.answer) {
          correctCount++;
        }
        if (question) {
          totalDifficulty += question.difficulty;
        }
      });
      
      const accuracy = correctCount / userState.answeredQuestions.size;
      const averageDifficulty = totalDifficulty / userState.answeredQuestions.size;
      
      if (accuracy > 0.8 && averageDifficulty > 2.5) return 3; // é«˜çº§
      if (accuracy > 0.7 && averageDifficulty > 2) return 2;   // ä¸­çº§
      if (accuracy > 0.6) return 1;                            // åˆçº§
      return 0;                                                // æ–°æ‰‹
    }

    // è¯†åˆ«ç”¨æˆ·è–„å¼±é¢†åŸŸ
    function identifyWeakAreas() {
      const weakAreas = [];
      const categoryStats = {};
      
      // åˆå§‹åŒ–ç»Ÿè®¡
      Object.keys(knowledgeGraph).forEach(category => {
        categoryStats[category] = { correct: 0, total: 0 };
      });
      
      // ç»Ÿè®¡æ¯ä¸ªç±»åˆ«çš„ç­”é¢˜æƒ…å†µ
      userState.answeredQuestions.forEach(questionId => {
        const question = questions.find(q => q.id === questionId);
        if (question) {
          categoryStats[question.category].total++;
          if (userState.selectedAnswer === question.answer) {
            categoryStats[question.category].correct++;
          }
        }
      });
      
      // æ‰¾å‡ºå‡†ç¡®ç‡ä½äºé˜ˆå€¼çš„ç±»åˆ«
      for (const [category, stats] of Object.entries(categoryStats)) {
        if (stats.total > 2 && stats.correct / stats.total < 0.6) {
          weakAreas.push(category);
        }
      }
      
      return weakAreas.length > 0 ? weakAreas : Object.keys(knowledgeGraph);
    }

    // ä¸ºç‰¹å®šç±»åˆ«é€‰æ‹©é—®é¢˜
    function selectQuestionsForCategory(questions, userLevel) {
      let targetDifficulty, count;
      
      switch(userLevel) {
        case 0: // æ–°æ‰‹
          targetDifficulty = 1; count = 2; break;
        case 1: // åˆçº§
          targetDifficulty = 1.5; count = 3; break;
        case 2: // ä¸­çº§
          targetDifficulty = 2; count = 3; break;
        case 3: // é«˜çº§
          targetDifficulty = 2.5; count = 4; break;
        default:
          targetDifficulty = 1.5; count = 3;
      }
      
      return questions
        .sort((a, b) => Math.abs(a.difficulty - targetDifficulty) - Math.abs(b.difficulty - targetDifficulty))
        .slice(0, Math.min(count, questions.length));
    }

    // é‡æ–°è¯„ä¼°å·²è§£é”çš„é¢˜ç›®
    function reevaluateUnlockedQuestions() {
      // æ ¹æ®ç”¨æˆ·æ°´å¹³è§£é”æ–°é¢˜ç›®
      const newUnlocked = [];
      
      questions.forEach(question => {
        if (!userState.unlockedQuestions.has(question.id)) {
          // æ£€æŸ¥æ˜¯å¦æ»¡è¶³è§£é”æ¡ä»¶
          const canUnlock = question.prerequisites.every(preq => 
            userState.answeredQuestions.has(preq)
          ) && question.difficulty <= userState.masteryLevel + 1;
          
          if (canUnlock) {
            newUnlocked.push(question.id);
          }
        }
      });
      
      newUnlocked.forEach(id => userState.unlockedQuestions.add(id));
      
      if (newUnlocked.length > 0) {
        // æ˜¾ç¤ºè§£é”é€šçŸ¥
        showUnlockNotification(newUnlocked);
      }
    }

    // æ˜¾ç¤ºè§£é”é€šçŸ¥
    function showUnlockNotification(unlockedIds) {
      const unlockedQuestions = questions.filter(q => unlockedIds.includes(q.id));
      const notification = document.createElement("div");
      notification.className = "fixed top-4 right-4 bg-white p-4 rounded-lg shadow-lg border-l-4 border-green-500 z-50";
      notification.innerHTML = `
        <h4 class="font-semibold mb-2">ğŸ¯ æ–°å…³å¡è§£é”ï¼</h4>
        <p class="text-sm mb-2">æ‚¨å·²è§£é” ${unlockedIds.length} ä¸ªæ–°é¢˜ç›®ï¼š</p>
        <ul class="text-xs list-disc list-inside">
          ${unlockedQuestions.map(q => `<li>${q.category} - ${q.question.substring(0, 30)}...</li>`).join('')}
        </ul>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.remove();
      }, 5000);
    }

    // æ›´æ–°å­¦ä¹ è·¯å¾„UI
    function updateLearningPathUI() {
      const pathContainer = document.querySelector(".learning-path");
      if (!pathContainer) return;
      
      pathContainer.innerHTML = "";
      
      userState.learningPath.forEach((node, index) => {
        const question = questions.find(q => q.id === node.questionId);
        if (!question) return;
        
        const nodeEl = document.createElement("div");
        nodeEl.className = "path-node";
        nodeEl.innerHTML = index + 1;
        nodeEl.setAttribute("data-id", question.id);
        nodeEl.setAttribute("data-category", question.category);
        
        // è®¾ç½®èŠ‚ç‚¹çŠ¶æ€
        if (index < userState.currentLevel) {
          nodeEl.classList.add("completed");
          const isCorrect = userState.answeredQuestions.has(question.id) && 
            userState.selectedAnswer === question.answer;
          nodeEl.classList.add(isCorrect ? "correct" : "incorrect");
        } else if (index === userState.currentLevel) {
          nodeEl.classList.add("current");
        } else {
          nodeEl.classList.add("locked");
        }
        
        // æ·»åŠ éš¾åº¦æŒ‡ç¤ºå™¨
        const difficultyIndicator = document.createElement("div");
        difficultyIndicator.className = "difficulty-indicator";
        difficultyIndicator.style.backgroundColor = 
          question.difficulty === 1 ? '#10B981' : 
          question.difficulty === 2 ? '#F59E0B' : '#EF4444';
        nodeEl.appendChild(difficultyIndicator);
        
        pathContainer.appendChild(nodeEl);
        
        // æ·»åŠ è¿æ¥çº¿
        if (index < userState.learningPath.length - 1) {
          const connector = document.createElement("div");
          connector.className = "path-connector";
          if (index < userState.currentLevel) {
            connector.classList.add("active");
          }
          pathContainer.appendChild(connector);
        }
      });
    }

    // æ›´æ–°ç”¨æˆ·æ°´å¹³æŒ‡ç¤ºå™¨
    function updateUserLevelIndicator() {
      const levels = ["æ–°æ‰‹", "åˆçº§", "ä¸­çº§", "é«˜çº§"];
      const descriptions = [
        "åˆšå¼€å§‹å­¦ä¹ å›¾ç¥ç»ç½‘ç»œï¼Œå»ºè®®ä»åŸºç¡€æ¦‚å¿µå¼€å§‹",
        "å·²æŒæ¡åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥å°è¯•æ›´å¤æ‚çš„æ¨¡å‹æ¶æ„",
        "å¯¹GNNæœ‰è¾ƒå¥½ç†è§£ï¼Œå¯ä»¥æŒ‘æˆ˜é«˜çº§ä¸»é¢˜å’Œåº”ç”¨",
        "GNNä¸“å®¶æ°´å¹³ï¼Œå¯ä»¥æ·±å…¥ç ”ç©¶å‰æ²¿æŠ€æœ¯å’Œå®è·µæŠ€å·§"
      ];
      
      userLevelStars.innerHTML = "â˜…".repeat(userState.masteryLevel + 1);
      userLevelText.textContent = levels[userState.masteryLevel];
      levelDescription.textContent = descriptions[userState.masteryLevel];
    }

    // æ›´æ–°çŸ¥è¯†æŒæ¡è¿›åº¦
    function updateKnowledgeProgress() {
      const container = document.querySelector(".knowledge-map");
      if (!container) return;
      
      container.innerHTML = "";
      
      Object.entries(knowledgeGraph).forEach(([category, info]) => {
        const stats = calculateCategoryStats(category);
        const masteryPercent = stats.total > 0 ? (stats.correct / stats.total) * 100 : 0;
        
        const areaEl = document.createElement("div");
        areaEl.className = "knowledge-area";
        areaEl.innerHTML = `
          <h4 class="font-semibold mb-2">${category}</h4>
          <p class="text-xs text-gray-600 mb-2">${info.description}</p>
          <div class="mastery-bar">
            <div class="mastery-fill" style="width: ${masteryPercent}%; background: ${info.color};"></div>
          </div>
          <div class="flex justify-between text-xs">
            <span>æŒæ¡åº¦: ${Math.round(masteryPercent)}%</span>
            <span>${stats.correct}/${stats.total}</span>
          </div>
        `;
        
        container.appendChild(areaEl);
      });
    }

    // è®¡ç®—ç±»åˆ«ç»Ÿè®¡
    function calculateCategoryStats(category) {
      let correct = 0, total = 0;
      
      userState.answeredQuestions.forEach(questionId => {
        const question = questions.find(q => q.id === questionId);
        if (question && question.category === category) {
          total++;
          if (userState.selectedAnswer === question.answer) {
            correct++;
          }
        }
      });
      
      return { correct, total };
    }

    // é€‰æ‹©é¢˜ç›®
    function selectQuestion() {
      if (!userState.adaptiveMode) {
        return userState.currentLevel % questions.length;
      }
      
      if (userState.learningPath.length > 0 && userState.currentLevel < userState.learningPath.length) {
        const pathNode = userState.learningPath[userState.currentLevel];
        return questions.findIndex(q => q.id === pathNode.questionId);
      }
      
      return 0;
    }

    // åŠ è½½é¢˜ç›®
    function loadQuestion() {
      userState.currentQuestionIndex = selectQuestion();
      const q = questions[userState.currentQuestionIndex];
      
      if (!q) return;
      
      questionText.textContent = q.question;
      questionCategory.textContent = q.category;
      questionDifficulty.style.backgroundColor = 
        q.difficulty === 1 ? '#10B981' : 
        q.difficulty === 2 ? '#F59E0B' : '#EF4444';
      
      quizForm.innerHTML = "";
      q.options.forEach((opt, i) => {
        const label = document.createElement("label");
        label.className = "flex items-center space-x-2 p-2 rounded hover:bg-gray-100 cursor-pointer";
        label.innerHTML = `<input type="radio" name="answer" value="${i}" class="text-blue-600"> <span>${opt}</span>`;
        quizForm.appendChild(label);
      });
      
      // é‡ç½®UIçŠ¶æ€
      feedback.classList.add("hidden");
      nextLevelContainer.classList.add("hidden");
      visualExplanation.classList.add("hidden");
      resourceRecommendation.classList.add("hidden");
      userState.selectedAnswer = null;
    }

    // æäº¤ç­”æ¡ˆ
    submitBtn.addEventListener("click", () => {
      const selectedOption = document.querySelector("input[name='answer']:checked");
      if (!selectedOption) {
        alert("è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼");
        return;
      }
      
      const answer = parseInt(selectedOption.value);
      userState.selectedAnswer = answer;
      const currentQuestion = questions[userState.currentQuestionIndex];
      const isCorrect = answer === currentQuestion.answer;
      
      // æ›´æ–°ç”¨æˆ·çŠ¶æ€
      userState.answeredQuestions.add(currentQuestion.id);
      
      if (isCorrect) {
        userState.score += currentQuestion.difficulty * 10;
        // è§£é”ç›¸å…³é¢˜ç›®
        unlockRelatedQuestions(currentQuestion.id);
      }
      
      // æ˜¾ç¤ºåé¦ˆ
      showFeedback(isCorrect, currentQuestion);
      
      // æ›´æ–°UI
      updateProgressDisplay();
      updateUserLevelIndicator();
      updateKnowledgeProgress();
    });

    // è§£é”ç›¸å…³é¢˜ç›®
    function unlockRelatedQuestions(questionId) {
      const relatedQuestions = questions.filter(q => 
        q.prerequisites.includes(questionId) && 
        !userState.unlockedQuestions.has(q.id)
      );
      
      relatedQuestions.forEach(q => {
        userState.unlockedQuestions.add(q.id);
      });
      
      if (relatedQuestions.length > 0) {
        showUnlockNotification(relatedQuestions.map(q => q.id));
      }
    }

    // æ˜¾ç¤ºåé¦ˆ
    function showFeedback(isCorrect, question) {
      feedback.classList.remove("hidden");
      
      if (isCorrect) {
        feedbackTitle.textContent = "âœ“ å›ç­”æ­£ç¡®ï¼";
        feedbackTitle.className = "font-semibold mb-2 text-green-600";
      } else {
        feedbackTitle.textContent = "âœ— å›ç­”é”™è¯¯";
        feedbackTitle.className = "font-semibold mb-2 text-red-600";
      }
      
      feedbackContent.innerHTML = isCorrect ? 
        question.explanation : 
        `<p>æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.options[question.answer]}</p><p class="mt-2">${question.explanation}</p>`;
      
      // æ˜¾ç¤ºè§£é‡Šå’Œèµ„æº
      explanationContent.textContent = getVisualExplanation(question);
      resourceList.innerHTML = "";
      question.resources.forEach(resource => {
        const li = document.createElement("li");
        li.textContent = resource;
        resourceList.appendChild(li);
      });
      
      visualExplanation.classList.remove("hidden");
      resourceRecommendation.classList.remove("hidden");
      nextLevelContainer.classList.remove("hidden");
    }

    // è·å–å¯è§†åŒ–è§£é‡Š
    function getVisualExplanation(question) {
      const explanations = {
        "åŸºç¡€æ¦‚å¿µ": "è¿™æ˜¯å›¾ç¥ç»ç½‘ç»œçš„åŸºç¡€çŸ¥è¯†ï¼Œå»ºè®®ç‰¢å›ºæŒæ¡ã€‚",
        "æ¨¡å‹æ¶æ„": "ç†è§£æ¨¡å‹æ¶æ„æœ‰åŠ©äºé€‰æ‹©åˆé€‚çš„æ–¹æ³•è§£å†³é—®é¢˜ã€‚",
        "åº”ç”¨åœºæ™¯": "äº†è§£åº”ç”¨åœºæ™¯å¯ä»¥å¸®åŠ©æ‚¨åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°è¿ç”¨GNNã€‚",
        "é«˜çº§ä¸»é¢˜": "è¿™äº›æ˜¯GNNçš„å‰æ²¿ç ”ç©¶æ–¹å‘ï¼Œé€‚åˆæ·±å…¥å­¦ä¹ ã€‚",
        "å®è·µæŠ€å·§": "å®ç”¨æŠ€å·§å¯ä»¥å¸®åŠ©æ‚¨æ›´æœ‰æ•ˆåœ°è®­ç»ƒå’Œä¼˜åŒ–æ¨¡å‹ã€‚"
      };
      return explanations[question.category] || "è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„GNNçŸ¥è¯†ç‚¹ã€‚";
    }

    // ä¸‹ä¸€å…³
    nextLevelBtn.addEventListener("click", () => {
      if (userState.adaptiveMode) {
        userState.currentLevel++;
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦ç”Ÿæˆæ–°çš„å­¦ä¹ è·¯å¾„
        if (userState.currentLevel >= userState.learningPath.length) {
          // å®Œæˆå½“å‰è·¯å¾„ï¼Œç”Ÿæˆæ–°è·¯å¾„
          generateLearningPath();
          
          // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰é¢˜ç›®éƒ½å·²å®Œæˆ
          if (userState.answeredQuestions.size >= questions.length * 0.8) {
            showCompletionCelebration();
            return;
          }
          
          // é‡ç½®å½“å‰è·¯å¾„ä¸­çš„ä½ç½®ï¼Œä½†ä¿æŒæ€»ä½“è¿›åº¦
          userState.currentLevel = 0;
        }
        
        // æ›´æ–°è¿›åº¦æ¡ï¼šåŸºäºæ€»ç­”é¢˜æ•°è€Œä¸æ˜¯å½“å‰è·¯å¾„ä½ç½®
        const totalAnswered = userState.answeredQuestions.size;
        const progressPercent = Math.min((totalAnswered / questions.length) * 100, 100);
        
        currentLevelSpan.textContent = totalAnswered + 1;
        progressFill.style.width = progressPercent + "%";
        
        updateLearningPathUI();
      } else {
        userState.currentLevel++;
        if (userState.currentLevel >= questions.length) {
          userState.currentLevel = 0;
        }
        
        currentLevelSpan.textContent = userState.currentLevel + 1;
        progressFill.style.width = ((userState.currentLevel + 1) / questions.length * 100) + "%";
      }
      
      loadQuestion();
    });

    // æ˜¾ç¤ºé€šå…³åº†ç¥
    function showCompletionCelebration() {
      finalScore.textContent = userState.score;
      completionCelebration.classList.remove("hidden");
    }

    // é‡æ–°å¼€å§‹
    restartBtn.addEventListener("click", () => {
      completionCelebration.classList.add("hidden");
      resetProgress();
    });

    // é‡ç½®è¿›åº¦
    function resetProgress() {
      userState.currentLevel = 0;
      userState.score = 0;
      userState.masteryLevel = 0;
      userState.masteredCategories = {};
      userState.weakCategories = {};
      userState.answeredQuestions.clear();
      userState.unlockedQuestions.clear();
      userState.unlockedQuestions.add(1);
      userState.learningPath = [];
      userState.selectedAnswer = null;
      
      // æ›´æ–°è¿›åº¦æ˜¾ç¤º
      updateProgressDisplay();
      
      if (userState.adaptiveMode) {
        generateLearningPath();
        updateUserLevelIndicator();
        updateKnowledgeProgress();
      }
      
      loadQuestion();
    }
    
    // æ›´æ–°è¿›åº¦æ˜¾ç¤º
    function updateProgressDisplay() {
      if (userState.adaptiveMode) {
        const totalAnswered = userState.answeredQuestions.size;
        const progressPercent = Math.min((totalAnswered / questions.length) * 100, 100);
        currentLevelSpan.textContent = totalAnswered + 1;
        progressFill.style.width = Math.max(progressPercent, 1) + "%";
      } else {
        currentLevelSpan.textContent = userState.currentLevel + 1;
        progressFill.style.width = Math.max(((userState.currentLevel + 1) / questions.length * 100), 1) + "%";
      }
    }

    // åˆå§‹åŠ è½½
    updateUserLevelIndicator();
    updateKnowledgeProgress();
    loadQuestion();
  </script>
</body>
</html>